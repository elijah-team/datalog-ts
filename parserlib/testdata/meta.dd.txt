main :- value.
value :- (object | array | intLit | stringLit).
object :- ["{", repSep(keyValue, ","), "}"].
keyValue :- [stringLit, ": ", value].
intLit :- repSep(digit, <succeed>).
array :- ["[", repSep(value, ","), "]"].
digit :- [0-9].
stringLit :- ["'", repSep([a-z], <succeed>), "'"].
----
text/plain
grammar [0-146]
  ruleDefn [0-14]
    ruleName: "main" [0-4]
    rule [8-13]
      ref: "value" [8-13]
  ruleDefn [15-62]
    ruleName: "value" [15-20]
    rule [24-61]
      choice [24-61]
        rule [25-31]
          ref: "object" [25-31]
        rule [34-39]
          ref: "array" [34-39]
        rule [42-48]
          ref: "intLit" [42-48]
        rule [51-60]
          ref: "stringLit" [51-60]
  ruleDefn [63-107]
    ruleName: "object" [63-69]
    rule [73-106]
      seq [73-106]
        rule [74-77]
          text: "\"{\"" [74-77]
        rule [79-100]
          repSep [79-100]
            rule [86-94]
              ref: "keyValue" [86-94]
            rule [96-99]
              text: "\",\"" [96-99]
        rule [102-105]
          text: "\"}\"" [102-105]
  ruleDefn [108-145]
    ruleName: "keyValue" [108-116]
    rule [120-144]
      seq [120-144]
        rule [121-130]
          ref: "stringLit" [121-130]
        rule [132-136]
          text: "\": \"" [132-136]
        rule [138-143]
          ref: "value" [138-143]
{
  "main": {
    "type": "Ref",
    "name": "value"
  },
  "value": {
    "type": "Choice",
    "choices": [
      {
        "type": "Ref",
        "name": "object"
      },
      {
        "type": "Ref",
        "name": "array"
      },
      {
        "type": "Ref",
        "name": "intLit"
      },
      {
        "type": "Ref",
        "name": "stringLit"
      }
    ]
  },
  "object": {
    "type": "Sequence",
    "items": [
      {
        "type": "Text",
        "value": "{"
      },
      {
        "type": "RepSep",
        "rep": {
          "type": "Ref",
          "name": "keyValue"
        },
        "sep": {
          "type": "Text",
          "value": ","
        }
      },
      {
        "type": "Text",
        "value": "}"
      }
    ]
  },
  "keyValue": {
    "type": "Sequence",
    "items": [
      {
        "type": "Ref",
        "name": "stringLit"
      },
      {
        "type": "Text",
        "value": ": "
      },
      {
        "type": "Ref",
        "name": "value"
      }
    ]
  }
}
