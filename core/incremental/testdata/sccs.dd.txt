.table edge
----
application/datalog

reach{from: A, to: C} :-
  A = C |
  edge{from: A, to: C} |
  edge{from: A, to: B} &
  reach{from: B, to: C}.
----
application/datalog

sameSCC{a: A, b: B} :-
  reach{from: A, to: B} &
  reach{from: B, to: A}.
----
application/datalog

edge{from: "a", to: "b"}.
----
incremental-datalog/trace
edge: [edge{from: "a", to: "b"}+1]
2: [{A: "a", C: "b"}+1]
3: [{A: "a", B: "b"}+1]
0: [{A: "a", C: "b"}+1]
5: []
6: [{A: "a", C: "b"}+1]
reach: [reach{from: "a", to: "b"}+1]
4: [{B: "a", C: "b"}+1]
7: [{A: "a", B: "b"}+1]
8: [{A: "b", B: "a"}+1]
5: []
9: []
9: []

edge{from: "b", to: "c"}.
----
incremental-datalog/trace
edge: [edge{from: "b", to: "c"}+1]
2: [{A: "b", C: "c"}+1]
3: [{A: "b", B: "c"}+1]
0: [{A: "b", C: "c"}+1]
5: []
6: [{A: "b", C: "c"}+1]
reach: [reach{from: "b", to: "c"}+1]
4: [{B: "b", C: "c"}+1]
7: [{A: "b", B: "c"}+1]
8: [{A: "c", B: "b"}+1]
5: [{A: "a", B: "b", C: "c"}+1]
9: []
9: []
0: [{A: "a", B: "b", C: "c"}+1]
6: [{A: "a", B: "b", C: "c"}+1]
reach: [reach{from: "a", to: "c"}+1]
4: [{B: "a", C: "c"}+1]
7: [{A: "a", B: "c"}+1]
8: [{A: "c", B: "a"}+1]
5: []
9: []
9: []

edge{from: "c", to: "a"}.
----
incremental-datalog/trace
edge: [edge{from: "c", to: "a"}+1]
2: [{A: "c", C: "a"}+1]
3: [{A: "c", B: "a"}+1]
0: [{A: "c", C: "a"}+1]
5: [{A: "c", B: "a", C: "b"}+1, {A: "c", B: "a", C: "c"}+1]
6: [{A: "c", C: "a"}+1]
0: [{A: "c", B: "a", C: "b"}+1]
0: [{A: "c", B: "a", C: "c"}+1]
reach: [reach{from: "c", to: "a"}+1]
6: [{A: "c", B: "a", C: "b"}+1]
6: [{A: "c", B: "a", C: "c"}+1]
4: [{B: "c", C: "a"}+1]
7: [{A: "c", B: "a"}+1]
8: [{A: "a", B: "c"}+1]
reach: [reach{from: "c", to: "b"}+1]
reach: [reach{from: "c", to: "c"}+1]
5: [{A: "b", B: "c", C: "a"}+1]
9: [{A: "c", B: "a"}+1]
9: [{A: "a", B: "c"}+1]
4: [{B: "c", C: "b"}+1]
7: [{A: "c", B: "b"}+1]
8: [{A: "b", B: "c"}+1]
4: [{B: "c", C: "c"}+1]
7: [{A: "c", B: "c"}+1]
8: [{A: "c", B: "c"}+1]
0: [{A: "b", B: "c", C: "a"}+1]
10: [{A: "c", B: "a"}+1]
10: [{A: "a", B: "c"}+1]
5: [{A: "b", B: "c", C: "b"}+1]
9: [{A: "c", B: "b"}+1]
9: [{A: "b", B: "c"}+1]
5: [{A: "b", B: "c", C: "c"}+1]
9: [{A: "c", B: "c"}+1]
9: [{A: "c", B: "c"}+1]
6: [{A: "b", B: "c", C: "a"}+1]
sameSCC: [sameSCC{a: "c", b: "a"}+1]
sameSCC: [sameSCC{a: "a", b: "c"}+1]
0: [{A: "b", B: "c", C: "b"}+1]
10: [{A: "c", B: "b"}+1]
10: [{A: "b", B: "c"}+1]
0: [{A: "b", B: "c", C: "c"}+1]
10: [{A: "c", B: "c"}+1]
10: []
reach: [reach{from: "b", to: "a"}+1]
6: [{A: "b", B: "c", C: "b"}+1]
sameSCC: [sameSCC{a: "c", b: "b"}+1]
sameSCC: [sameSCC{a: "b", b: "c"}+1]
6: [{A: "b", B: "c", C: "c"}+1]
sameSCC: [sameSCC{a: "c", b: "c"}+1]
4: [{B: "b", C: "a"}+1]
7: [{A: "b", B: "a"}+1]
8: [{A: "a", B: "b"}+1]
reach: [reach{from: "b", to: "b"}+1]
reach: [reach{from: "b", to: "c"}+1]
5: [{A: "a", B: "b", C: "a"}+1]
9: [{A: "b", B: "a"}+1]
9: [{A: "a", B: "b"}+1]
4: [{B: "b", C: "b"}+1]
7: [{A: "b", B: "b"}+1]
8: [{A: "b", B: "b"}+1]
4: [{B: "b", C: "c"}+1]
7: [{A: "b", B: "c"}+1]
8: [{A: "c", B: "b"}+1]
0: [{A: "a", B: "b", C: "a"}+1]
10: [{A: "b", B: "a"}+1]
10: [{A: "a", B: "b"}+1]
5: [{A: "a", B: "b", C: "b"}+1]
9: [{A: "b", B: "b"}+1]
9: [{A: "b", B: "b"}+1]
5: [{A: "a", B: "b", C: "c"}+1]
9: [{A: "b", B: "c"}+1]
9: [{A: "c", B: "b"}+1]
6: [{A: "a", B: "b", C: "a"}+1]
sameSCC: [sameSCC{a: "b", b: "a"}+1]
sameSCC: [sameSCC{a: "a", b: "b"}+1]
0: [{A: "a", B: "b", C: "b"}+1]
10: [{A: "b", B: "b"}+1]
10: []
0: [{A: "a", B: "b", C: "c"}+1]
10: []
10: []
reach: [reach{from: "a", to: "a"}+1]
6: [{A: "a", B: "b", C: "b"}+1]
sameSCC: [sameSCC{a: "b", b: "b"}+1]
6: []
4: [{B: "a", C: "a"}+1]
7: [{A: "a", B: "a"}+1]
8: [{A: "a", B: "a"}+1]
reach: [reach{from: "a", to: "b"}+1]
5: [{A: "c", B: "a", C: "a"}+1]
9: [{A: "a", B: "a"}+1]
9: [{A: "a", B: "a"}+1]
4: [{B: "a", C: "b"}+1]
7: [{A: "a", B: "b"}+1]
8: [{A: "b", B: "a"}+1]
0: [{A: "c", B: "a", C: "a"}+1]
10: [{A: "a", B: "a"}+1]
10: []
5: [{A: "c", B: "a", C: "b"}+1]
9: [{A: "a", B: "b"}+1]
9: [{A: "b", B: "a"}+1]
6: [{A: "c", B: "a", C: "a"}+1]
sameSCC: [sameSCC{a: "a", b: "a"}+1]
0: [{A: "c", B: "a", C: "b"}+1]
10: []
10: []
reach: [reach{from: "c", to: "a"}+1]
6: []
4: [{B: "c", C: "a"}+1]
7: [{A: "c", B: "a"}+1]
8: [{A: "a", B: "c"}+1]
5: [{A: "b", B: "c", C: "a"}+1]
9: [{A: "c", B: "a"}+1]
9: [{A: "a", B: "c"}+1]
0: [{A: "b", B: "c", C: "a"}+1]
10: []
10: []
6: []

reach{}?
----
application/datalog
reach{from: "a", to: "a"}.
reach{from: "a", to: "b"}.
reach{from: "a", to: "c"}.
reach{from: "b", to: "a"}.
reach{from: "b", to: "b"}.
reach{from: "b", to: "c"}.
reach{from: "c", to: "a"}.
reach{from: "c", to: "b"}.
reach{from: "c", to: "c"}.

sameSCC{}?
----
application/datalog
sameSCC{a: "a", b: "a"}.
sameSCC{a: "a", b: "b"}.
sameSCC{a: "a", b: "c"}.
sameSCC{a: "b", b: "a"}.
sameSCC{a: "b", b: "b"}.
sameSCC{a: "b", b: "c"}.
sameSCC{a: "c", b: "a"}.
sameSCC{a: "c", b: "b"}.
sameSCC{a: "c", b: "c"}.
